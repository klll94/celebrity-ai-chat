<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åäººæ™ºèƒ½ä½“å¯¹è¯</title>
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="stylesheet" href="assets/design-tokens.css">
    <link rel="stylesheet" href="assets/theme.css">
    <meta name="description" content="ä¸18ä½ä¸­å›½å†å²åäººAIæ™ºèƒ½ä½“å¯¹è¯äº¤æµ">
    <meta name="keywords" content="åäººå¯¹è¯,AIæ™ºèƒ½ä½“,å†å²åäºº,æç™½,å­”å­">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="assets/styles.css" as="style">
    <link rel="preload" href="assets/app.js" as="script">
</head>
<body class="app-gradient">
    <div class="main-container">
        <!-- å¤´éƒ¨åŒºåŸŸ -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">åäººæ™ºèƒ½ä½“å¯¹è¯</h1>
                <p class="app-subtitle">é€‰æ‹©ä¸€ä½å†å²åäººï¼Œå¼€å§‹æœ‰è¶£çš„å¯¹è¯å§</p>
                
                <!-- äºŒç»´ç åˆ†äº«åŠŸèƒ½ -->
                <div class="share-section">
                    <button id="qr-toggle" class="share-btn">
                        ğŸ“± åˆ†äº«äºŒç»´ç 
                    </button>
                    <button id="config-toggle" class="share-btn" style="margin-left:12px;">
                        âš™ï¸ é…ç½®API
                    </button>
                    <div id="qr-container" class="qr-modal" style="display: none;">
                        <div class="qr-content">
                            <h3>æ‰«ç è®¿é—®</h3>
                            <div id="qr-code" class="qr-image"></div>
                            <p>ä½¿ç”¨æ‰‹æœºæ‰«æä¸Šæ–¹äºŒç»´ç </p>
                            <button onclick="hideQR()" class="close-btn">å…³é—­</button>
                        </div>
                    </div>
                    <div id="config-container" class="qr-modal" style="display:none;">
                        <div class="qr-content" style="max-width:340px;">
                            <h3>API è®¾ç½®</h3>
                            <div style="text-align:left;display:flex;flex-direction:column;gap:10px;">
                                <label>ä¸ªäººä»¤ç‰Œ(API Key)ï¼š
                                    <input id="cfg-api-key" type="password" placeholder="pat_xxx" style="width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:8px;">
                                </label>
                                <label>è§’è‰²ID(bot_id)ï¼š
                                    <input id="cfg-bot-id" type="text" placeholder="ä¾‹å¦‚ï¼šlibai æˆ– newton" style="width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:8px;">
                                </label>
                                <label>å¯¹åº” bot_id å€¼ï¼š
                                    <input id="cfg-bot-val" type="text" placeholder="ä¾‹å¦‚ï¼š7123..." style="width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:8px;">
                                </label>
                                <small>è¯´æ˜ï¼šä¿å­˜åä¼šå†™å…¥æµè§ˆå™¨æœ¬åœ°(localStorage)ï¼Œä»…æœ¬æœºç”Ÿæ•ˆã€‚</small>
                            </div>
                            <div style="display:flex;gap:10px;justify-content:center;margin-top:10px;">
                                <button id="cfg-save" class="close-btn">ä¿å­˜</button>
                                <button id="cfg-debug" class="close-btn" style="background:#f39c12;">è°ƒè¯•</button>
                                <button onclick="hideConfig()" class="close-btn" style="background:#888;">å…³é—­</button>
                            </div>
                            <div id="debug-info" style="margin-top:15px;padding:10px;background:#f8f9fa;border-radius:6px;font-size:12px;display:none;">
                                <strong>å½“å‰é…ç½®çŠ¶æ€ï¼š</strong>
                                <div id="debug-content"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- åäººç½‘æ ¼ -->
        <main class="celebrities-section">
            <div class="celebrities-grid" id="celebrities-grid">
                <!-- åäººå¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <footer class="app-footer">
            <p>ğŸ’¡ æ”¯æŒç§»åŠ¨ç«¯è®¿é—® | ğŸ¤– AIæ™ºèƒ½å¯¹è¯ | ğŸ“± æ‰«ç åˆ†äº«</p>
            <p class="version-info">Version 1.0 | åŸºäºGitHub Pageséƒ¨ç½²</p>
        </footer>
    </div>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>æ­£åœ¨åŠ è½½åäººåˆ—è¡¨...</p>
    </div>

    <script src="assets/avatars.js"></script>
    <script src="assets/app.js"></script>
    <script>
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–åº”ç”¨
            initializeApp();
            
            // ç”ŸæˆäºŒç»´ç 
            generateQRCode();
            
            // éšè—åŠ è½½åŠ¨ç”»
            setTimeout(() => {
                document.getElementById('loading-overlay').style.display = 'none';
            }, 500);
        });

        // ç”ŸæˆäºŒç»´ç 
        function generateQRCode() {
            const currentUrl = window.location.href;
            const qrCodeDiv = document.getElementById('qr-code');
            
            // ä½¿ç”¨åœ¨çº¿äºŒç»´ç ç”ŸæˆAPI
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(currentUrl)}`;
            qrCodeDiv.innerHTML = `<img src="${qrUrl}" alt="äºŒç»´ç " style="width: 200px; height: 200px;">`;
        }

        // æ˜¾ç¤º/éšè—äºŒç»´ç 
        document.getElementById('qr-toggle').onclick = function() {
            const container = document.getElementById('qr-container');
            container.style.display = container.style.display === 'none' ? 'flex' : 'none';
        };

        // æ˜¾ç¤º/éšè—é…ç½®
        document.getElementById('config-toggle').onclick = function() {
            const el = document.getElementById('config-container');
            el.style.display = el.style.display === 'none' ? 'flex' : 'none';
            if (el.style.display === 'flex') {
                // é¢„å¡«å·²æœ‰å€¼
                document.getElementById('cfg-api-key').value = localStorage.getItem('coze_api_key') || '';
            }
        };

        document.getElementById('cfg-save').onclick = function() {
            const apiKey = document.getElementById('cfg-api-key').value.trim();
            const botKey = document.getElementById('cfg-bot-id').value.trim();
            const botVal = document.getElementById('cfg-bot-val').value.trim();
            if (apiKey) localStorage.setItem('coze_api_key', apiKey);
            if (botKey && botVal) {
                const mapRaw = localStorage.getItem('bot_map') || '{}';
                const map = JSON.parse(mapRaw);
                map[botKey] = botVal;
                localStorage.setItem('bot_map', JSON.stringify(map));
                alert('å·²ä¿å­˜ bot_id æ˜ å°„: ' + botKey);
            } else if (apiKey) {
                alert('å·²ä¿å­˜ API Key');
            }
            hideConfig();
        };

        document.getElementById('cfg-debug').onclick = function() {
            const debugInfo = document.getElementById('debug-info');
            const debugContent = document.getElementById('debug-content');
            
            const apiKey = localStorage.getItem('coze_api_key') || 'æœªè®¾ç½®';
            const mapRaw = localStorage.getItem('bot_map') || '{}';
            const map = JSON.parse(mapRaw);
            
            debugContent.innerHTML = `
                <div>API Key: ${apiKey.substr(0, 10)}...</div>
                <div>Botæ˜ å°„: ${JSON.stringify(map, null, 2)}</div>
                <div>å¯ç”¨è§’è‰²: libai, luxun, edison, newton, faraday, wangwei ç­‰18ä¸ª</div>
                <div style="margin-top:8px;color:#007aff;">
                    <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong><br/>
                    1. è§’è‰²IDè¯·ç”¨: libai, luxun, edison, newton ç­‰<br/>
                    2. bot_id å€¼æ˜¯æ•°å­—å­—ç¬¦ä¸²ï¼Œå¦‚: 7123456789012345678<br/>
                    3. API Key æ ¼å¼: pat_xxxxxxxxxx
                </div>
            `;
            
            debugInfo.style.display = debugInfo.style.display === 'none' ? 'block' : 'none';
        };

        function hideQR() {
            document.getElementById('qr-container').style.display = 'none';
        }

        function hideConfig() {
            document.getElementById('config-container').style.display = 'none';
        }

        // ç‚¹å‡»èƒŒæ™¯å…³é—­äºŒç»´ç 
        document.getElementById('qr-container').onclick = function(e) {
            if (e.target === this) {
                hideQR();
            }
        };
    </script>
</body>
</html> 